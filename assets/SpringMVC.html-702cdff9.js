import{_ as p,W as o,X as c,$ as n,a0 as s,Z as e,a2 as a,C as l}from"./framework-6a3aa88c.js";const i="data:image/webp;base64,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",u="/java-tips/assets/60a719d2-b67c-473a-9250-cdd72fe9ed7f-2aa06566.webp",r="data:image/webp;base64,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",d="/java-tips/assets/c7d7120d-838d-407a-bbdd-b8bd10f973e1-92a1542e.webp",k="/java-tips/assets/bedf1aaf-1c86-4752-89e6-f34aa9e676a7-9a563a08.webp",v="/java-tips/assets/58e5812e-ea1a-4f60-ac50-c32ded039116-e1155bfb.webp",m="/java-tips/assets/c5dcc2fc-399c-498d-a90a-3b2410e77ad0-f2f453fd.webp",g="/java-tips/assets/d8cbf0f3-1499-4346-9bc4-785715c6c9bf-f6a9d2f7.webp",b="data:image/webp;base64,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",h="/java-tips/assets/62719fbd-be8a-4cd9-b2e0-214e5ea6713a-f23a43ec.webp",f="/java-tips/assets/f336e49d-82de-40ff-b436-9c99be23911e-7f139108.webp",q="/java-tips/assets/2d3fe640-021a-433f-bfae-e87d80be5282-548ea47c.webp",E="/java-tips/assets/3139a90f-126a-4f1f-8f9e-be791104d915-dad23745.webp",w="/java-tips/assets/e161f130-f694-493d-b88c-d5edd5c60d74-41baf0b3.webp",y="/java-tips/assets/5c5d0e95-e1e9-4aec-951e-8ee90a9b9ab1-5474bf3f.webp",x="/java-tips/assets/4d99f2f0-fa40-407e-a576-b964fbd6f2ec-a7356731.webp",A="/java-tips/assets/470324c1-604a-451e-90d8-a3a85e3cb924-992fd89c.webp",j="/java-tips/assets/84be0a06-b3b9-4f4c-9a18-d8b07a1cd1fd-c91cf07d.webp",S="data:image/webp;base64,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",R="/java-tips/assets/4b8d1354-0a77-4cfe-b783-74e2100c9557-23cce626.webp",B="data:image/webp;base64,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",M="/java-tips/assets/043ddbf5-3646-479d-9ee8-cd393241a2b5-d08e67f8.webp",H="/java-tips/assets/1cae080e-52fc-484d-90a5-00545933d902-0782e369.webp",I="/java-tips/assets/915c108f-6487-4d72-bf33-9f6fb18d64b3-cb466bf3.webp",C="/java-tips/assets/b98ad1e2-9da6-4243-abb3-6e85bd945503-bdc02a5b.webp",P="/java-tips/assets/b43f1b9a-5fd6-41ec-8093-1bfc3ae780c2-e59aed29.webp",F="/java-tips/assets/fc95161b-76f7-4362-aa71-9226b89dba95-59f4e644.webp",D="data:image/webp;base64,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",V="/java-tips/assets/fd7b87a8-5706-4a29-bbb0-b44fccd84901-c4547503.webp",L="/java-tips/assets/af10972e-aa23-4eae-aaec-40d8de0bd9cb-37cee1ad.webp",N="/java-tips/assets/f135df2d-8df3-4660-8b18-e6918bd9af36-7e79d93b.webp",O="/java-tips/assets/15acf3ed-c8e8-4cc4-82d6-d45e8026af63-7d986b5d.webp",T="/java-tips/assets/615f5bf6-23b0-4bcb-8f58-025bb4064b70-df434809.webp",z="/java-tips/assets/0ed22c29-9bc2-4ee5-99e8-be9492fc9686-8a1299b9.webp",X="/java-tips/assets/e7578ded-3cdb-4d6c-94d8-788e39ab6845-cd4bae42.webp",U="/java-tips/assets/d897564b-ad6a-40ec-95d1-91d1fabe74ac-bdd7b0e6.webp",J="/java-tips/assets/43de9505-cdc5-4593-9f65-94086766ed1a-d1c85791.webp",W={},Q=a(`<h1 id="springmvc-all-in-one" tabindex="-1"><a class="header-anchor" href="#springmvc-all-in-one" aria-hidden="true">#</a> SpringMVC ALL IN ONE</h1><ul><li><a href="#springmvc-all-in-one">SpringMVC ALL IN ONE</a><ul><li><a href="#springmvc%E7%9A%84%E9%85%8D%E7%BD%AE">SpringMVC的配置</a><ul><li><a href="#%E7%BB%86%E8%8A%82%E8%A1%A5%E5%85%85"><strong>细节补充：</strong></a></li></ul></li><li><a href="#requestmapping%E7%9A%84%E5%85%B6%E4%BB%96%E5%B1%9E%E6%80%A7">@RequestMapping的其他属性</a><ul><li><a href="#method">method</a></li><li><a href="#params">params</a></li><li><a href="#headers">headers</a></li><li><a href="#consume">consume</a></li><li><a href="#produces">produces</a></li></ul></li><li><a href="#ant%E9%A3%8E%E6%A0%BC%E7%9A%84url%E5%92%8Cpathvariable">ant风格的url和@PathVariable</a><ul><li><a href="#requestmapping%E7%9A%84ant%E9%A3%8E%E6%A0%BCurl">@RequestMapping的ant风格url</a></li><li><a href="#pathvariable">@PathVariable</a></li></ul></li><li><a href="#%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E4%BF%A1%E6%81%AF">获取请求信息</a><ul><li><a href="#requestmapping-%E8%8E%B7%E5%8F%96%E5%8F%82%E6%95%B0-pathxxx-xxx">@RequestMapping 获取参数 path?xxx= xxx</a></li><li><a href="#requestheader-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%A4%B4">@RequestHeader 获取请求头</a></li><li><a href="#cookievalue-%E8%8E%B7%E5%8F%96cookie%E7%9A%84%E5%80%BC">@CookieValue 获取Cookie的值</a></li></ul></li><li><a href="#%E4%BD%BF%E7%94%A8-pojo-%E5%AF%B9%E8%B1%A1%E7%BB%91%E5%AE%9A%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E5%80%BC">使用 POJO 对象绑定请求参数值</a></li><li><a href="#%E4%BD%BF%E7%94%A8tomcat%E5%8E%9F%E7%94%9Fapi">使用tomcat原生API</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E8%BE%93%E5%87%BA-model%E5%92%8Cmodelmap">数据输出 Model和ModelMap</a><ul><li><a href="#%E4%BD%BF%E7%94%A8model">使用Model</a></li><li><a href="#%E4%BD%BF%E7%94%A8modelmap">使用ModelMap</a></li></ul></li><li><a href="#%E6%95%B0%E6%8D%AE%E8%BE%93%E5%87%BA-modelandview%E4%BD%BF%E7%94%A8">数据输出 ModelAndView使用</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E8%BE%93%E5%87%BA-sessionattributes">数据输出 @SessionAttributes</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E8%BE%93%E5%87%BA-modelattribute">数据输出 @ModelAttribute</a></li><li><a href="#%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-dispatcherservlet">源码分析 DispatcherServlet</a><ul><li><a href="#%E6%A6%82%E8%A7%88">概览</a></li><li><a href="#%E6%95%B4%E4%BD%93">整体</a></li><li><a href="#dodispatch%E7%9A%84%E8%AF%A6%E7%BB%86%E7%BB%86%E8%8A%82">doDispatch的详细细节</a></li><li><a href="#gethandler%E7%9A%84%E8%AF%A6%E7%BB%86">getHandler的详细</a></li><li><a href="#gethandleradapter">getHandlerAdapter</a></li></ul></li><li><a href="#%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-springmvc%E7%9A%84%E4%B9%9D%E5%A4%A7%E7%BB%84%E4%BB%B6">源码分析 SpringMVC的九大组件</a><ul><li><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96">初始化</a></li></ul></li><li><a href="#%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-modelattribute">源码分析 @ModelAttribute</a></li><li><a href="#%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90-%E8%BD%AC%E5%8F%91%E5%92%8C%E9%87%8D%E5%AE%9A%E5%90%91">视图解析 转发和重定向</a></li><li><a href="#%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90">源码分析 视图解析</a></li><li><a href="#%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90-jstl-%E5%9B%BD%E9%99%85%E5%8C%96">视图解析 JSTL 国际化</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A-mvcannotation-driver">数据绑定 mvc:annotation-driver</a><ul><li><a href="#%E5%BA%8F%E8%A8%80jsp%E4%B8%A4%E7%A7%8D%E8%8E%B7%E5%8F%96%E9%A1%B9%E7%9B%AE%E8%B7%AF%E5%BE%84%E7%9A%84%E6%96%B9%E5%BC%8F">序言：JSP两种获取项目路径的方式</a></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%E7%B1%BB%E5%9E%8B%E5%92%8C%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E7%9A%84%E6%8B%A6%E6%88%AA">自定义数据绑定类型和静态资源的拦截</a></li><li><a href="#%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F%E5%8C%96">日期格式化</a></li></ul></li><li><a href="#%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C-%E6%A0%A1%E9%AA%8C%E6%B3%A8%E8%A7%A3%E5%8E%BB%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2">数据校验 校验注解&amp;去错误页面</a><ul><li><a href="#%E6%8F%90%E7%A4%BAidea%E4%BD%BF%E7%94%A8-alt--shift--insert-%E8%BF%9B%E5%85%A5%E5%A4%9A%E8%A1%8C%E7%BC%96%E8%BE%91%E6%A8%A1%E5%BC%8F">提示：IDEA使用 alt + shift + insert 进入多行编辑模式</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C">数据校验</a></li><li><a href="#%E5%9B%BD%E9%99%85%E5%8C%96%E5%AE%9A%E5%88%B6%E9%94%99%E8%AF%AF%E6%B6%88%E6%81%AF">国际化定制错误消息</a></li></ul></li><li><a href="#springmvc%E5%AF%B9ajax%E7%9A%84%E6%94%AF%E6%8C%81">SpringMVC对AJAX的支持</a></li><li><a href="#%E8%AF%B7%E6%B1%82%E4%BD%93-responsebody">请求体 @ResponseBody</a></li><li><a href="#%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%A4%B4-httpentity">获取请求头 @HttpEntity</a></li><li><a href="#responseentity-%E8%BF%94%E5%9B%9E%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE">@ResponseEntity 返回响应式数据</a></li><li><a href="#%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E5%8F%8A%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0">文件下载及文件上传</a><ul><li><a href="#%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD">文件下载</a></li><li><a href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0">文件上传</a><ul><li><a href="#httpmessageconverter">HttpMessageConverter</a></li></ul></li><li><a href="#%E5%A4%9A%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0">多文件上传</a></li></ul></li><li><a href="#%E6%8B%A6%E6%88%AA%E5%99%A8%E5%8F%8A%E5%A4%9A%E6%8B%A6%E6%88%AA%E5%99%A8">拦截器及多拦截器</a><ul><li><a href="#%E5%A4%9A%E6%8B%A6%E6%88%AA%E5%99%A8">多拦截器</a></li><li><a href="#%E5%B0%8F%E7%BB%93">小结</a></li></ul></li><li><a href="#%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E6%8B%A6%E6%88%AA%E5%99%A8">源码分析 拦截器</a><ul><li><a href="#%E5%85%B7%E4%BD%93%E8%B0%83%E8%AF%95">具体调试</a></li></ul></li><li><a href="#%E5%9B%BD%E9%99%85%E5%8C%96">国际化</a><ul><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9B%BD%E9%99%85%E5%8C%96%E6%96%87%E4%BB%B6">自定义国际化文件</a></li><li><a href="#%E4%BD%BF%E7%94%A8sessionlocaleresolver%E8%BF%9B%E8%A1%8C%E5%9B%BD%E9%99%85%E5%8C%96">使用SessionLocaleResolver进行国际化</a></li><li><a href="#%E6%8B%A6%E6%88%AA%E5%99%A8%E9%85%8D%E5%90%88%E5%9B%BD%E9%99%85%E5%8C%96">拦截器配合国际化</a></li></ul></li><li><a href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86-exceptionhandler">异常处理 @ExceptionHandler</a><ul><li><a href="#%E5%A4%84%E7%90%86%E5%BC%82%E5%B8%B8%E7%9A%84%E4%B8%80%E8%88%AC%E6%AD%A5%E9%AA%A4">处理异常的一般步骤</a></li></ul></li><li><a href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86-responsestatus">异常处理 @ResponseStatus</a><ul><li><a href="#responsestatus%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8">@ResponseStatus的基本使用</a><ul><li><a href="#%E9%94%99%E8%AF%AF%E7%9A%84%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F">错误的请求方式</a></li></ul></li></ul></li><li><a href="#%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86">源码分析 异常处理</a><ul><li><a href="#handlerexceptionresolver%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%B1%BB">HandlerExceptionResolver的实现类</a></li></ul></li><li><a href="#%E5%B0%8F%E7%BB%93springmvc%E7%9A%84%E8%BF%90%E8%A1%8C%E6%B5%81%E7%A8%8B">【小结】SpringMVC的运行流程</a><ul><li><a href="#1-%E6%89%80%E6%9C%89%E8%AF%B7%E6%B1%82%E5%89%8D%E7%AB%AF%E6%8E%A7%E5%88%B6%E5%99%A8dispatcherservlet%E8%B0%83%E7%94%A8dodispatch%E8%BF%9B%E8%A1%8C%E5%A4%84%E7%90%86">1. 所有请求，前端控制器（DispatcherServlet）调用doDispatch进行处理</a></li><li><a href="#2-%E6%A0%B9%E6%8D%AEhandlermapping%E7%9A%84%E8%AF%B7%E6%B1%82%E5%BA%94%E8%89%B2%E5%8F%B7%E4%BF%A1%E6%81%AF%E6%89%BE%E5%88%B0%E5%A4%84%E7%90%86%E5%BD%93%E5%89%8D%E7%9A%84%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%89%A7%E8%A1%8C%E9%93%BE">2. 根据HandlerMapping的请求应色号信息找到，处理当前的请求，处理执行链</a></li><li><a href="#3-%E6%A0%B9%E6%8D%AE%E5%BD%93%E5%89%8D%E5%A4%84%E7%90%86%E5%99%A8%E6%89%BE%E5%88%B0%E5%AE%83%E7%9A%84%E9%80%82%E9%85%8D%E5%99%A8">3. 根据当前处理器找到它的适配器</a></li><li><a href="#4-%E6%8B%A6%E6%88%AA%E5%99%A8%E7%9A%84prehandler%E5%85%88%E6%89%A7%E8%A1%8C">4. 拦截器的preHandler先执行</a></li><li><a href="#5-%E9%80%82%E9%85%8D%E5%99%A8%E6%89%A7%E8%A1%8C%E7%9B%AE%E6%A0%87%E6%96%B9%E6%B3%95%E8%BF%94%E5%9B%9Emodelandview">5. 适配器执行目标方法，返回ModelAndView</a></li><li><a href="#6-%E6%8B%A6%E6%88%AA%E5%99%A8%E7%9A%84posthandler%E6%89%A7%E8%A1%8C">6. 拦截器的postHandler执行</a></li><li><a href="#7-%E6%B8%B2%E6%9F%93%E9%A1%B5%E9%9D%A2%E5%A4%84%E7%90%86%E7%BB%93%E6%9E%9C">7. 渲染页面，处理结果</a></li></ul></li><li><a href="#springmvc%E5%92%8Cspring%E7%9A%84%E6%95%B4%E5%90%88%E5%88%86%E5%B7%A5%E6%98%8E%E7%A1%AE">SpringMVC和Spring的整合（分工明确）</a><ul><li><a href="#%E5%90%88%E5%B9%B6">合并</a></li><li><a href="#%E5%88%86%E5%AE%B9%E5%99%A8">分容器</a></li></ul></li></ul></li></ul><h2 id="springmvc的配置" tabindex="-1"><a class="header-anchor" href="#springmvc的配置" aria-hidden="true">#</a> SpringMVC的配置</h2><p>新增的Maven包</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring-version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring-version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ 在web.xml配置DispatcherServlet：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--  SpringMVC思想是一个前端控制器拦截所有请求，并只能派发：这个前端控制器是一个Servlet
      可以在web.xml配置拦截
--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>springDispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.servlet.DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--      contextConfigLocation指定SpringMVC的配置文件--&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>classpath:springmvc.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--    Servlet启动加载，servlet第一次访问创建对象
        load-on-startup 服务器启动的时候创建对象，值越小，越先创建对象
--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>springDispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--      /* 和 /都是拦截所有请求
          /* 的范围更大,还会拦截.jsp请求
--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置IOC：注 -- 视图解析器是用来方便跳转页面用的</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.zhiyucs.controller<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!--    视图解析器--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.view.InternalResourceViewResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prefix<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WEB-INF/pages/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>suffix<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.jsp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>编写Controller</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>@Controller
public class MyFirstController {
    @RequestMapping(&quot;/hello&quot;)
    public String index() {
        return &quot;success&quot;;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不指定配置文件的用法：</p><p>如果<strong>不用 <code> &lt;init-param&gt; &lt;/init-param&gt;</code></strong> 指定配置文件，它会在WEB-INF下找到**<code>&lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;</code>**的springmvc-servlet：</p><figure><img src="`+i+`" alt="d02c1842-8ae0-48fa-969d-046b41e75649" tabindex="0" loading="lazy"><figcaption>d02c1842-8ae0-48fa-969d-046b41e75649</figcaption></figure><h3 id="细节补充" tabindex="-1"><a class="header-anchor" href="#细节补充" aria-hidden="true">#</a> <strong>细节补充：</strong></h3><p>如果前端的请求不同：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hello<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>进入Hello页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,17),Y={href:"http://localhost:8080/SpringMVC_01_war_exploded/hello",target:"_blank",rel:"noopener noreferrer"},K=a(`<div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/hello<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>进入Hello页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,1),G={href:"http://localhost:8080/hello",target:"_blank",rel:"noopener noreferrer"},Z=a(`<h2 id="requestmapping的其他属性" tabindex="-1"><a class="header-anchor" href="#requestmapping的其他属性" aria-hidden="true">#</a> @RequestMapping的其他属性</h2><h3 id="method" tabindex="-1"><a class="header-anchor" href="#method" aria-hidden="true">#</a> method</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//    默认是全接收</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/index&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;index&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="params" tabindex="-1"><a class="header-anchor" href="#params" aria-hidden="true">#</a> params</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//    发送请求携带的username必须是123</span>
<span class="token comment">//    请求规则必须满足以上规则,必须有pwd,不能有age</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/index&quot;</span><span class="token punctuation">,</span>
            method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">,</span>
            params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;username==123&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pwd&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;!age&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;index&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="headers" tabindex="-1"><a class="header-anchor" href="#headers" aria-hidden="true">#</a> headers</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//    规定请求头</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/index&quot;</span><span class="token punctuation">,</span>
            method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">,</span>
            params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;username==123&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pwd&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;!age&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;index&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="consume" tabindex="-1"><a class="header-anchor" href="#consume" aria-hidden="true">#</a> consume</h3><p>规定请求头中的content-type</p><h3 id="produces" tabindex="-1"><a class="header-anchor" href="#produces" aria-hidden="true">#</a> produces</h3><p>给响应头加上content-type：text/html;charset=utf-8</p><h2 id="ant风格的url和-pathvariable" tabindex="-1"><a class="header-anchor" href="#ant风格的url和-pathvariable" aria-hidden="true">#</a> ant风格的url和@PathVariable</h2><h3 id="requestmapping的ant风格url" tabindex="-1"><a class="header-anchor" href="#requestmapping的ant风格url" aria-hidden="true">#</a> @RequestMapping的ant风格url</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//    URL地址可以写模糊匹配</span>
<span class="token comment">//    ?: 能代替任意一个字符</span>
<span class="token comment">//    *: 能代替任意多个字符,和一层路径</span>
<span class="token comment">//    **: 能代替多层路径</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/antTest0?&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span>  <span class="token class-name">String</span> <span class="token function">antTest01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;模糊匹配antTest&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token comment">// 匹配 http://localhost:8080/SpringMVC_01_war_exploded/antTest03</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/antTest0*&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span>  <span class="token class-name">String</span> <span class="token function">antTest02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;*的测试&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;模糊匹配antTest&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token comment">// http://localhost:8080/SpringMVC_01_war_exploded/antTest0321312</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/a*/antTest0*&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span>  <span class="token class-name">String</span> <span class="token function">antTest03</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;*的路径测试&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;模糊匹配antTest&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token comment">// http://localhost:8080/SpringMVC_01_war_exploded/adas/antTest0321312</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/a/**/antTest0*&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span>  <span class="token class-name">String</span> <span class="token function">antTest04</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;**的测试&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;模糊匹配antTest&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token comment">//http://localhost:8080/SpringMVC_01_war_exploded/a/das/antTest0321312</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="pathvariable" tabindex="-1"><a class="header-anchor" href="#pathvariable" aria-hidden="true">#</a> @PathVariable</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// 占位符只能占一层路径</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/login/{username}&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// zhiyu</span>
    <span class="token keyword">return</span> <span class="token string">&quot;login successful!&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">//http://localhost:8080/SpringMVC_01_war_exploded/login/zhiyu</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>REST的解释：</p><ul><li>Re（Resource）资源</li><li>Re（Representation） 表现层</li><li>ST（State Transfer）状态转化</li></ul><h2 id="获取请求信息" tabindex="-1"><a class="header-anchor" href="#获取请求信息" aria-hidden="true">#</a> 获取请求信息</h2><h3 id="requestmapping-获取参数-path-xxx-xxx" tabindex="-1"><a class="header-anchor" href="#requestmapping-获取参数-path-xxx-xxx" aria-hidden="true">#</a> @RequestMapping 获取参数 path?xxx= xxx</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// @RequestParam参数</span>
    <span class="token comment">// required 这个参数是否必须</span>
    <span class="token comment">// defaultValue 默认值:没带参数是null</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> defaultValue <span class="token operator">=</span> <span class="token string">&quot;JOJO&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;login successful!&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
<span class="token comment">// http://localhost:8080/SpringMVC_01_war_exploded/login?username=zhiyu -- zhiyu</span>
<span class="token comment">// http://localhost:8080/SpringMVC_01_war_exploded/login -- JOJO</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="requestheader-获取请求头" tabindex="-1"><a class="header-anchor" href="#requestheader-获取请求头" aria-hidden="true">#</a> @RequestHeader 获取请求头</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//    相当于@RequestHeader(&quot;User-Agent&quot;) == userAgent = request.getHeader(&quot;User-Agent&quot;)</span>
<span class="token comment">//    如果请求头没有这个参数会报错, 参数一样:value required defaultValue</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/head&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getHeaderFunc</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;User-Agent&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> userAgent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;请求头中的信息&quot;</span> <span class="token operator">+</span> userAgent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;header!!&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="cookievalue-获取cookie的值" tabindex="-1"><a class="header-anchor" href="#cookievalue-获取cookie的值" aria-hidden="true">#</a> @CookieValue 获取Cookie的值</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token comment">// 以前获取cookie : Cookie[] cookies = request.getCookies();</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/cookie&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token annotation punctuation">@CookieValue</span><span class="token punctuation">(</span><span class="token string">&quot;JSESSIONID&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> jid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jid<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;cookie!!&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="使用-pojo-对象绑定请求参数值" tabindex="-1"><a class="header-anchor" href="#使用-pojo-对象绑定请求参数值" aria-hidden="true">#</a> 使用 POJO 对象绑定请求参数值</h2><p>前端：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hello<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>书名<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>作者<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>author<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>价格<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>提交<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>实体类：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> bookName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> author<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>控制层：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/hello&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token class-name">Book</span> book<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>解决中文乱码的方案：</p><p>在web.xml配置：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>characterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.filter.CharacterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>encoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>utf-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--      解决响应乱码:response.setCharacter()--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>foreceEncoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>characterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**注意：**这个字符过滤器的配置必须在之前：</p><figure><img src="`+u+`" alt="60a719d2-b67c-473a-9250-cdd72fe9ed7f" tabindex="0" loading="lazy"><figcaption>60a719d2-b67c-473a-9250-cdd72fe9ed7f</figcaption></figure><h2 id="使用tomcat原生api" tabindex="-1"><a class="header-anchor" href="#使用tomcat原生api" aria-hidden="true">#</a> 使用tomcat原生API</h2><p>在Maven中加入依赖：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>控制层：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token comment">// 原生API</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/origin&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">originalAPI</span><span class="token punctuation">(</span><span class="token class-name">HttpSession</span> session<span class="token punctuation">,</span>
                              <span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span>
                              <span class="token class-name">HttpServletResponse</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;req&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;请求测试&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;session&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;session测试&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;origin&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>JSP通过EL表达式可以取到数据：</p><p>注意：isELIgnored=&quot;false&quot;</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; isELIgnored=&quot;false&quot; %&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Origin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>
        \${ requestScope.req }
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>
        \${ sessionScope.session }
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="数据输出-model和modelmap" tabindex="-1"><a class="header-anchor" href="#数据输出-model和modelmap" aria-hidden="true">#</a> 数据输出 Model和ModelMap</h2><h3 id="使用model" tabindex="-1"><a class="header-anchor" href="#使用model" aria-hidden="true">#</a> 使用Model</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/handler01&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">handler01</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;handler01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;你好&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;modelTest&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用modelmap" tabindex="-1"><a class="header-anchor" href="#使用modelmap" aria-hidden="true">#</a> 使用ModelMap</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/handler01&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">handler01</span><span class="token punctuation">(</span><span class="token class-name">ModelMap</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;handler01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;你好&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token keyword">return</span> <span class="token string">&quot;modelTest&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Map、Model、ModelMap最终都是绑定在类<strong>BindingAwareModelMap</strong>工作</p><p>BindingAwareModelMap保存的数据都会放在<strong>请求域</strong>中</p><figure><img src="`+r+'" alt="dcaf2c6b-62e3-4ad3-aea9-023b5fa4e2f9" tabindex="0" loading="lazy"><figcaption>dcaf2c6b-62e3-4ad3-aea9-023b5fa4e2f9</figcaption></figure><figure><img src="'+d+`" alt="c7d7120d-838d-407a-bbdd-b8bd10f973e1" tabindex="0" loading="lazy"><figcaption>c7d7120d-838d-407a-bbdd-b8bd10f973e1</figcaption></figure><h2 id="数据输出-modelandview使用" tabindex="-1"><a class="header-anchor" href="#数据输出-modelandview使用" aria-hidden="true">#</a> 数据输出 ModelAndView使用</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code> <span class="token doc-comment comment">/**
     * 既包含视图信息（页面地址）也包括模型数据（给页面的数据）
     * 而且数据放在请求域中
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/handler03&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">hadnler03</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//        ModelAndView的构造器参数是视图名，视图解析器会帮助拼串</span>
        <span class="token class-name">ModelAndView</span> mv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token string">&quot;modelTest&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 或者 mv.setViewName(&quot;modelTest&quot;);</span>
        mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;你好会啊&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mv<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="数据输出-sessionattributes" tabindex="-1"><a class="header-anchor" href="#数据输出-sessionattributes" aria-hidden="true">#</a> 数据输出 @SessionAttributes</h2><p>@SessionAttributes 有三个属性：</p><p>names：声明需要存储到session中数据的名称</p><p>types：声明存储到session中参数类型，将模型中对应类型的参数存储到session中</p><p>value：其实和names是一样的。names 和 value 同时使用会报错</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 使用注解：
 * 只能放在类上
 * 给BindingAwareModelMap中保存数据，同时给session中放一份
 */</span>
<span class="token annotation punctuation">@SessionAttributes</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IndexController</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意：</strong>@SessionAttributes的参数 -- names必须包含要传入session的key，如果没有sesssion域中就没有这个数据</p><h2 id="数据输出-modelattribute" tabindex="-1"><a class="header-anchor" href="#数据输出-modelattribute" aria-hidden="true">#</a> 数据输出 @ModelAttribute</h2><p>被@ModelAttribute注释的方法会在此controller每个方法执行前被执行，因此对于一个controller映射多个URL的用法来说，要谨慎使用</p><p>应用场景：</p><ul><li>方法上</li><li>方法的参数上</li></ul><p>Controller</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ModelAttributeTestController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@ModelAttribute</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">modelTest</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> a<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/He&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span>  <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;modelTest&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>JSP：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>\${requestScope.a}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>结果：</p><figure><img src="`+k+'" alt="bedf1aaf-1c86-4752-89e6-f34aa9e676a7" tabindex="0" loading="lazy"><figcaption>bedf1aaf-1c86-4752-89e6-f34aa9e676a7</figcaption></figure><p>示例及大致流程：</p><figure><img src="'+v+`" alt="58e5812e-ea1a-4f60-ac50-c32ded039116" tabindex="0" loading="lazy"><figcaption>58e5812e-ea1a-4f60-ac50-c32ded039116</figcaption></figure><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Hello2ModelController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@ModelAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;book&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">populateModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token class-name">Book</span> book<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       book<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;西游记&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">return</span> book<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/index&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token annotation punctuation">@ModelAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;book&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Book</span> book<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">return</span> <span class="token string">&quot;index&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="源码分析-dispatcherservlet" tabindex="-1"><a class="header-anchor" href="#源码分析-dispatcherservlet" aria-hidden="true">#</a> 源码分析 DispatcherServlet</h2><h3 id="概览" tabindex="-1"><a class="header-anchor" href="#概览" aria-hidden="true">#</a> 概览</h3><hr><ol><li><p>所有请求过来DispatcherServlet收到请求</p></li><li><p>调用doDispatch方法进行处理</p></li><li><ol><li><p>getHandler() 根据当前请求地址找到能处理这个请求的目标处理器</p></li><li><ol><li>根据当前请求在HandlerMapping中找到这个请求的映射信息，获取到目标处理器类</li></ol></li><li><p>getHandlerAdapter() 根据当前处理器能获取到能执行这个处理器方法的适配器</p></li><li><ol><li>根据处理器类，找到当前类的HandlerAdapter 适配器</li></ol></li><li><p>使用获取到的（RequestMappingHandlerAdapter）执行目标方法</p></li><li><p>目标方法执行会返回ModelAndView对象</p></li><li><p>根据ModelAndView的信息转发到具体页面，并可以在请求域中获取</p></li></ol></li><li><p>getHandlerAdapter</p></li></ol><h3 id="整体" tabindex="-1"><a class="header-anchor" href="#整体" aria-hidden="true">#</a> 整体</h3><hr><p>整个DispatcherServlet的继承关系</p><figure><img src="`+m+'" alt="c5dcc2fc-399c-498d-a90a-3b2410e77ad0" tabindex="0" loading="lazy"><figcaption>c5dcc2fc-399c-498d-a90a-3b2410e77ad0</figcaption></figure><p>FrameworkServlet有两个核心方法：</p><figure><img src="'+g+`" alt="d8cbf0f3-1499-4346-9bc4-785715c6c9bf" tabindex="0" loading="lazy"><figcaption>d8cbf0f3-1499-4346-9bc4-785715c6c9bf</figcaption></figure><p>核心使用了同一个函数：<strong>processRequest(request, response);</strong></p><p>在processRequest方法中有一个核心函数：<strong>doService(request, response);</strong></p><p>它是一个抽象函数：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">doService</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="`+b+`" alt="2cc5c063-a656-43b5-9010-c6169a701315" tabindex="0" loading="lazy"><figcaption>2cc5c063-a656-43b5-9010-c6169a701315</figcaption></figure><p>然后可以根据继承关系找到DispatcherServlet的doService：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doService</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>这个方法有一个核心函数：<strong>doDispatch</strong>，这个函数也在这个类中：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doDispatch</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>整理路线：</p><figure><img src="`+h+`" alt="62719fbd-be8a-4cd9-b2e0-214e5ea6713a" tabindex="0" loading="lazy"><figcaption>62719fbd-be8a-4cd9-b2e0-214e5ea6713a</figcaption></figure><h3 id="dodispatch的详细细节" tabindex="-1"><a class="header-anchor" href="#dodispatch的详细细节" aria-hidden="true">#</a> doDispatch的详细细节</h3><p>DispathcerServlet类中的doDispatch函数：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token doc-comment comment">/**
     * Process the actual dispatching to the handler.
     * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>The handler will be obtained by applying the servlet&#39;s HandlerMappings in order.
     * The HandlerAdapter will be obtained by querying the servlet&#39;s installed HandlerAdapters
     * to find the first that supports the handler class.
     * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>All HTTP methods are handled by this method. It&#39;s up to HandlerAdapters or handlers
     * themselves to decide which methods are acceptable.
     * <span class="token keyword">@param</span> <span class="token parameter">request</span> current HTTP request
     * <span class="token keyword">@param</span> <span class="token parameter">response</span> current HTTP response
     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span> in case of any kind of processing failure
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doDispatch</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>两个核心函数：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// Actually invoke the handler. 处理器的方法被调用</span>
<span class="token comment">// 真正去执行方法的处理器 ha在下下面的笔记</span>
mv <span class="token operator">=</span> ha<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">// 转发到目标页面</span>
<span class="token function">processDispatchResult</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">,</span> mv<span class="token punctuation">,</span> dispatchException<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>检查是否是文件上传请求：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>processedRequest <span class="token operator">=</span> <span class="token function">checkMultipart</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// Determine handler for the current request.</span>
<span class="token comment">// 根据当前请求决定（哪个类来处理）处理器</span>
mappedHandler <span class="token operator">=</span> <span class="token function">getHandler</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果没有找到处理器能处理这个请求就404抛异常：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>mappedHandler <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">noHandlerFound</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// Determine handler adapter for the current request.</span>
<span class="token comment">// 拿到能执行这个类方法的适配器（反射工具），如注解适配器：AnnotationMethodHandlerAdapter</span>
<span class="token class-name">HandlerAdapter</span> ha <span class="token operator">=</span> <span class="token function">getHandlerAdapter</span><span class="token punctuation">(</span>mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>适配器来执行目标方法，执行完后返回的返回值作为视图名，保存在<strong>ModelAndView</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>mv <span class="token operator">=</span> ha<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果这个modelandview没有名字就使用默认的名字（请求的地址名）：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token function">applyDefaultViewName</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> mv<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>根据方法执行完成后封装的ModelAndView转发到对应页面，而且ModelAndView数据可以从请求域获取</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">/*
processedRequest 包装后的请求
response 响应
mappedHandler 目标处理器
mv modelandview，要转到的地址
*/</span>
<span class="token function">processDispatchResult</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">,</span> mv<span class="token punctuation">,</span> dispatchException<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="gethandler的详细" tabindex="-1"><a class="header-anchor" href="#gethandler的详细" aria-hidden="true">#</a> getHandler的详细</h3><p>原函数：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">protected</span> <span class="token class-name">HandlerExecutionChain</span> <span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HandlerMapping</span> mapping <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">HandlerExecutionChain</span> handler <span class="token operator">=</span> mapping<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>handler <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> handler<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>handlerMappings</strong>：处理器映射器，保存了每个处理器能处理的映射（比如创建了一个类HelloController）</p><p><strong>handlerMap</strong>：IOC容器启动Controller对象的时候扫描每个处理器能处理什么请求，保存在handlerMappings的handlerMap属性（<strong>spring5封装到了mappingRegistry -- mappingLookup</strong>）</p><figure><img src="`+f+'" alt="f336e49d-82de-40ff-b436-9c99be23911e" tabindex="0" loading="lazy"><figcaption>f336e49d-82de-40ff-b436-9c99be23911e</figcaption></figure><h3 id="gethandleradapter" tabindex="-1"><a class="header-anchor" href="#gethandleradapter" aria-hidden="true">#</a> getHandlerAdapter</h3><hr><p>这是通过调用IndexController里的“/success”得到的：</p><figure><img src="'+q+`" alt="2d3fe640-021a-433f-bfae-e87d80be5282" tabindex="0" loading="lazy"><figcaption>2d3fe640-021a-433f-bfae-e87d80be5282</figcaption></figure><p>可知返回的resultHandler就是这个</p><p>为了找到目标处理器的适配器，要去拿适配器才能执行方法：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">HandlerAdapter</span> <span class="token function">getHandlerAdapter</span><span class="token punctuation">(</span><span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlerAdapters <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HandlerAdapter</span> adapter <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlerAdapters<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>adapter<span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> adapter<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServletException</span><span class="token punctuation">(</span><span class="token string">&quot;No adapter for handler [&quot;</span> <span class="token operator">+</span> handler <span class="token operator">+</span>
                               <span class="token string">&quot;]: The DispatcherServlet configuration needs to include a HandlerAdapter that supports this handler&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>调试时只有RequestMappingHandlerAdapter：</p><figure><img src="`+E+'" alt="3139a90f-126a-4f1f-8f9e-be791104d915" tabindex="0" loading="lazy"><figcaption>3139a90f-126a-4f1f-8f9e-be791104d915</figcaption></figure><p>判断该适配器是否有方法：</p><figure><img src="'+w+`" alt="e161f130-f694-493d-b88c-d5edd5c60d74" tabindex="0" loading="lazy"><figcaption>e161f130-f694-493d-b88c-d5edd5c60d74</figcaption></figure><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// Process last-modified header, if supported by the handler.</span>
<span class="token class-name">String</span> method <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>最终这个method 只要处理器有标了注解@RequestMapping的方法就能使用</p><p>HandlerMapping的实现类：</p><figure><img src="`+y+`" alt="5c5d0e95-e1e9-4aec-951e-8ee90a9b9ab1" tabindex="0" loading="lazy"><figcaption>5c5d0e95-e1e9-4aec-951e-8ee90a9b9ab1</figcaption></figure><h2 id="源码分析-springmvc的九大组件" tabindex="-1"><a class="header-anchor" href="#源码分析-springmvc的九大组件" aria-hidden="true">#</a> 源码分析 SpringMVC的九大组件</h2><p>以下组件都来自类：<strong>DispatcherServlet</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token doc-comment comment">/** 文件上传解析器 */</span>
    <span class="token annotation punctuation">@Nullable</span>
    <span class="token keyword">private</span> <span class="token class-name">MultipartResolver</span> multipartResolver<span class="token punctuation">;</span>
    <span class="token doc-comment comment">/** 国际化解析器 */</span>
    <span class="token annotation punctuation">@Nullable</span>
    <span class="token keyword">private</span> <span class="token class-name">LocaleResolver</span> localeResolver<span class="token punctuation">;</span>
    <span class="token doc-comment comment">/** 主题解析器 */</span>
    <span class="token annotation punctuation">@Nullable</span>
    <span class="token keyword">private</span> <span class="token class-name">ThemeResolver</span> themeResolver<span class="token punctuation">;</span>
    <span class="token doc-comment comment">/** Handler映射信息 */</span>
    <span class="token annotation punctuation">@Nullable</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HandlerMapping</span><span class="token punctuation">&gt;</span></span> handlerMappings<span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**Handler适配器 */</span>
    <span class="token annotation punctuation">@Nullable</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HandlerAdapter</span><span class="token punctuation">&gt;</span></span> handlerAdapters<span class="token punctuation">;</span>
    <span class="token doc-comment comment">/** 异常解析起 */</span>
    <span class="token annotation punctuation">@Nullable</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HandlerExceptionResolver</span><span class="token punctuation">&gt;</span></span> handlerExceptionResolvers<span class="token punctuation">;</span>
    <span class="token doc-comment comment">/** 视图名转换 */</span>
    <span class="token annotation punctuation">@Nullable</span>
    <span class="token keyword">private</span> <span class="token class-name">RequestToViewNameTranslator</span> viewNameTranslator<span class="token punctuation">;</span>
    <span class="token doc-comment comment">/** SpringMVC允许重定向携带数据 */</span>
    <span class="token annotation punctuation">@Nullable</span>
    <span class="token keyword">private</span> <span class="token class-name">FlashMapManager</span> flashMapManager<span class="token punctuation">;</span>
    <span class="token doc-comment comment">/** 视图解析器 */</span>
    <span class="token annotation punctuation">@Nullable</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ViewResolver</span><span class="token punctuation">&gt;</span></span> viewResolvers<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>将组件设计成接口的好处：接口就是规范，提供扩展性</p><h3 id="初始化" tabindex="-1"><a class="header-anchor" href="#初始化" aria-hidden="true">#</a> 初始化</h3><p>初始化函数：去容器找这个组件，如果没有找到就用默认配置</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onRefresh</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">initStrategies</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">initStrategies</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">initMultipartResolver</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initLocaleResolver</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initThemeResolver</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initHandlerMappings</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initHandlerAdapters</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initHandlerExceptionResolvers</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initRequestToViewNameTranslator</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initViewResolvers</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initFlashMapManager</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+x+`" alt="4d99f2f0-fa40-407e-a576-b964fbd6f2ec" tabindex="0" loading="lazy"><figcaption>4d99f2f0-fa40-407e-a576-b964fbd6f2ec</figcaption></figure><h2 id="源码分析-modelattribute" tabindex="-1"><a class="header-anchor" href="#源码分析-modelattribute" aria-hidden="true">#</a> 源码分析 @ModelAttribute</h2><ol><li><p>有注解：保存注解信息了，最终得到这个注解应该对应的值</p></li><li><p>没注解：</p></li><li><ol><li><p>看是否是原生API</p></li><li><p>看是否Model或者Map、XXX</p></li><li><p>都不是，看是否是简单类型，paramName</p></li><li><p>给attrName赋值（参数标了@ModelAttribute(&quot;&quot;)就是指定的，没标就是&quot;&quot;）</p></li><li><ol><li><p>确定自定义参数</p></li><li><ol><li>attrName使用参数类型的首字母小写，或者之前@ModelAttribute(&quot;&quot;)的值</li><li>先看隐含模型中每个attrName作为key对应的值，如果有就从隐含模型中获取并赋值</li><li>看是否是@SessionAttributes(value=&quot;haha&quot;)；标注的属性，如果是从session，如果不是就抛出异常</li><li>如果不是@SessionAttributes标注的属性，就利用反射创建一个对象</li></ol></li></ol></li><li><p>拿到之前创建好的对象，使用数据绑定器（WebDataBinder）将请求中每一个数据绑定到这个对象中</p></li></ol></li><li></li><li></li></ol><h2 id="视图解析-转发和重定向" tabindex="-1"><a class="header-anchor" href="#视图解析-转发和重定向" aria-hidden="true">#</a> 视图解析 转发和重定向</h2><p><strong>forward</strong>：前缀的转发，不会有配置的视图解析器拼串</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/success&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;forward:/success.jsp&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>重定向redirect</strong>：使用redirect<strong>不会携带数据</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/success&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;forward:/success.jsp&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="源码分析-视图解析" tabindex="-1"><a class="header-anchor" href="#源码分析-视图解析" aria-hidden="true">#</a> 源码分析 视图解析</h2><p><strong>【源码调试提示】<strong>IDEA中可以使用</strong>Ctrl+Alt+方向键左/右</strong>控制上一次/下一次代码<strong>跳转的位置</strong></p><p>调试doDispatcher的</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>mv <span class="token operator">=</span> ha<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>会进入到：RequestMappingHandlerAdapter类中的<strong>handleInternal</strong></p><p>然后封装成：ModelAndView</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ModelAndView</span> mav<span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
mav <span class="token operator">=</span> <span class="token function">invokeHandlerMethod</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handlerMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ 任何方法的返回值，最终都会被包装成ModelAndView对象</p><p>视图渲染函数：（页面就是渲染数据模型）</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token function">processDispatchResult</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">,</span> mv<span class="token punctuation">,</span> dispatchException<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在processDispatchResult中调用render(mv, request, response);渲染函数</p><p>在render中：view</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">View</span> view<span class="token punctuation">;</span>
        <span class="token class-name">String</span> viewName <span class="token operator">=</span> mv<span class="token punctuation">.</span><span class="token function">getViewName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>viewName <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// We need to resolve the view name.</span>
            view <span class="token operator">=</span> <span class="token function">resolveViewName</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> mv<span class="token punctuation">.</span><span class="token function">getModelInternal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> locale<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>resolveViewName实现的是ViewResolver的接口：得到View对象</p><figure><img src="`+A+`" alt="470324c1-604a-451e-90d8-a3a85e3cb924" tabindex="0" loading="lazy"><figcaption>470324c1-604a-451e-90d8-a3a85e3cb924</figcaption></figure><p>视图解析名字：ViewResolver属于SpringMVC九大组件</p><p>ViewResolver根据方法的返回值，得到一个view对象</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ViewResolver</span> viewResolver <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>viewResolvers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">View</span> view <span class="token operator">=</span> viewResolver<span class="token punctuation">.</span><span class="token function">resolveViewName</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>view <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> view<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过调试在resolveViewName里：</p><p>如果没有缓冲区，就创建一个view</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">createView</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>源码：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token class-name">View</span> <span class="token function">createView</span><span class="token punctuation">(</span><span class="token class-name">String</span> viewName<span class="token punctuation">,</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// If this resolver is not supposed to handle the given view,</span>
    <span class="token comment">// return null to pass on to the next resolver in the chain.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">canHandle</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Check for special &quot;redirect:&quot; prefix.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>viewName<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token constant">REDIRECT_URL_PREFIX</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> redirectUrl <span class="token operator">=</span> viewName<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token constant">REDIRECT_URL_PREFIX</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">RedirectView</span> view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedirectView</span><span class="token punctuation">(</span>redirectUrl<span class="token punctuation">,</span>
                                             <span class="token function">isRedirectContextRelative</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">isRedirectHttp10Compatible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hosts <span class="token operator">=</span> <span class="token function">getRedirectHosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>hosts <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            view<span class="token punctuation">.</span><span class="token function">setHosts</span><span class="token punctuation">(</span>hosts<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">applyLifecycleMethods</span><span class="token punctuation">(</span><span class="token constant">REDIRECT_URL_PREFIX</span><span class="token punctuation">,</span> view<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Check for special &quot;forward:&quot; prefix.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>viewName<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token constant">FORWARD_URL_PREFIX</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> forwardUrl <span class="token operator">=</span> viewName<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token constant">FORWARD_URL_PREFIX</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InternalResourceView</span> view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InternalResourceView</span><span class="token punctuation">(</span>forwardUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">applyLifecycleMethods</span><span class="token punctuation">(</span><span class="token constant">FORWARD_URL_PREFIX</span><span class="token punctuation">,</span> view<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Else fall back to superclass implementation: calling loadView.</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">createView</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>分析：</strong></p><p>如果是以redirect为前缀，下面的forward同理</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// Check for special &quot;redirect:&quot; prefix.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>viewName<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token constant">REDIRECT_URL_PREFIX</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token class-name">RedirectView</span> view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedirectView</span><span class="token punctuation">(</span>redirectUrl<span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果没有前缀就调用父类默认创建对象</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">createView</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol><li><p>视图解析器得到view对象的流程：所有配置的视图解析器来长沙根据视图名（返回值）得到View（视图）对象，如果能得到就返回，得不到就换下一个视图解析器</p></li><li><p>调用view对象的render</p></li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span>
                   <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;View &quot;</span> <span class="token operator">+</span> <span class="token function">formatViewName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                     <span class="token string">&quot;, model &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>model <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> model <span class="token operator">:</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptyMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                     <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>staticAttributes<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;, static attributes &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>staticAttributes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> mergedModel <span class="token operator">=</span> <span class="token function">createMergedOutputModel</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">prepareResponse</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 渲染要给页面输出的所有数据</span>
    <span class="token function">renderMergedOutputModel</span><span class="token punctuation">(</span>mergedModel<span class="token punctuation">,</span> <span class="token function">getRequestToExpose</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>InternalResourceView中的renderMergedOutputModel（传递数据的方法）</p><p>将模型中的数据取出来放到请求域request中</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">renderMergedOutputModel</span><span class="token punctuation">(</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// Expose the model object as request attributes.</span>
    <span class="token comment">// 将模型的数据放在请求域中</span>
    <span class="token function">exposeModelAsRequestAttributes</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Expose helpers as request attributes, if any.</span>
    <span class="token function">exposeHelpers</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Determine the path for the request dispatcher.</span>
    <span class="token class-name">String</span> dispatcherPath <span class="token operator">=</span> <span class="token function">prepareForRendering</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Obtain a RequestDispatcher for the target resource (typically a JSP).</span>
    <span class="token class-name">RequestDispatcher</span> rd <span class="token operator">=</span> <span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> dispatcherPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>rd <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServletException</span><span class="token punctuation">(</span><span class="token string">&quot;Could not get RequestDispatcher for [&quot;</span> <span class="token operator">+</span> <span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                                   <span class="token string">&quot;]: Check that the corresponding file exists within your web application archive!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// If already included or response already committed, perform include, else forward.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">useInclude</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Including [&quot;</span> <span class="token operator">+</span> <span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        rd<span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// Note: The forwarded resource is supposed to determine the content type itself.</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Forwarding to [&quot;</span> <span class="token operator">+</span> <span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        rd<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>总结：</strong></p><p>视图解析器只是为了得到视图对象，视图对象才能真正的转发（将模型数据放在请求域中）或者重定向到页面，视图对象才能真正的渲染视图</p><figure><img src="`+j+`" alt="84be0a06-b3b9-4f4c-9a18-d8b07a1cd1fd" tabindex="0" loading="lazy"><figcaption>84be0a06-b3b9-4f4c-9a18-d8b07a1cd1fd</figcaption></figure><h2 id="视图解析-jstl-国际化" tabindex="-1"><a class="header-anchor" href="#视图解析-jstl-国际化" aria-hidden="true">#</a> 视图解析 JSTL 国际化</h2><p>导入Maven -- taglib</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.taglibs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>taglibs-standard-impl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.taglibs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>taglibs-standard-spec<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>写入国际化的配置：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--    国际化资源文件配置--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.context.support.ResourceBundleMessageSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>messageSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--        制定基础名--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>basename<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.zhiyucs.conf.i18n<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建国际化的配置文件</p><figure><img src="`+S+'" alt="527be244-1b29-431e-b444-27acbd4662aa" tabindex="0" loading="lazy"><figcaption>527be244-1b29-431e-b444-27acbd4662aa</figcaption></figure><figure><img src="'+R+`" alt="4b8d1354-0a77-4cfe-b783-74e2100c9557" tabindex="0" loading="lazy"><figcaption>4b8d1354-0a77-4cfe-b783-74e2100c9557</figcaption></figure><p>使用JSP的jstl的fmt编写国际化：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;%@ taglib prefix=&quot;fmt&quot; uri=&quot;http://java.sun.com/jsp/jstl/fmt&quot; %&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">fmt:</span>message</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>welcomeinfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">fmt:</span>message</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loginBtn<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> ：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">fmt:</span>message</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> ：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">fmt:</span>message</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loginBtn<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="数据绑定-mvc-annotation-driver" tabindex="-1"><a class="header-anchor" href="#数据绑定-mvc-annotation-driver" aria-hidden="true">#</a> 数据绑定 mvc:annotation-driver</h2><h3 id="序言-jsp两种获取项目路径的方式" tabindex="-1"><a class="header-anchor" href="#序言-jsp两种获取项目路径的方式" aria-hidden="true">#</a> 序言：JSP两种获取项目路径的方式</h3><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>set</span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ctx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${pageContext.request.contextPath}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
&lt;%=request.getContextPath()%&gt;
\${pageContext.request.contextPath }
&lt;%
    String contextPath = request.getServletPath();
%&gt;
    &lt;%
        String contextPath = request.getRequestURI();
    %&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="自定义数据绑定类型和静态资源的拦截" tabindex="-1"><a class="header-anchor" href="#自定义数据绑定类型和静态资源的拦截" aria-hidden="true">#</a> 自定义数据绑定类型和静态资源的拦截</h3><p>自定义一个转换类：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span> <span class="token attr-name">conversion-service</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>conversionService<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.context.support.ConversionServiceFactoryBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>conversionService<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>converters<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>自定义的转换类<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>静态资源拦截：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--    静态资源可以访问，动态资源的请求不能
            静态资源能访问的原因：所有请求都映射给tomcat
--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>default-servlet-handler</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!--使用自己定义的转换组件--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="日期格式化" tabindex="-1"><a class="header-anchor" href="#日期格式化" aria-hidden="true">#</a> 日期格式化</h3><p>在 Date 类型的属性上加入 @DateTimeFormat 注解</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Repository</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@DateTimeFormat</span><span class="token punctuation">(</span>pattern<span class="token operator">=</span><span class="token string">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> birthday<span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>加入 joda 相关的包</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>joda-time<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>joda-time<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.9.9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 SpringMVC 配置文件中加入 &lt;mvc:annotation-driven /&gt;</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>注册一个自定义既具有转换器也有格式化功能：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span> <span class="token attr-name">conversion-service</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formattingConversionService<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.format.support.FormattingConversionServiceFactoryBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formattingConversionService<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="数据校验-校验注解-去错误页面" tabindex="-1"><a class="header-anchor" href="#数据校验-校验注解-去错误页面" aria-hidden="true">#</a> 数据校验 校验注解&amp;去错误页面</h2><h3 id="提示-idea使用-alt-shift-insert-进入多行编辑模式" tabindex="-1"><a class="header-anchor" href="#提示-idea使用-alt-shift-insert-进入多行编辑模式" aria-hidden="true">#</a> 提示：IDEA使用 alt + shift + insert 进入多行编辑模式</h3><h3 id="数据校验" tabindex="-1"><a class="header-anchor" href="#数据校验" aria-hidden="true">#</a> 数据校验</h3><hr><p>\\1. 导包</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;
    &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;
    &lt;version&gt;5.4.1.Final&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;javax.validation&lt;/groupId&gt;
    &lt;artifactId&gt;validation-api&lt;/artifactId&gt;
    &lt;version&gt;2.0.1.Final&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;
    &lt;artifactId&gt;jboss-logging&lt;/artifactId&gt;
    &lt;version&gt;3.4.1.Final&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\\2. 给实体类加上需要的校验注解</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>@NotEmpty
private Integer id;
@Length(min = 6, max = 18)
private String name;
//    @Past是一个过去的时间
@Past
@DateTimeFormat(pattern=&quot;yyyy-MM-dd&quot;)
private Date birthday;
private String gender;
@Email
private String email;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\\3. 告诉SpringMVC这个实体类需要校验 <strong>@Valid</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>@RequestMapping(value = &quot;/birth&quot;, method = RequestMethod.POST)
public String birth(@Valid Person person, Model model) {
...
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\\4. 获取校验结果：BindingResult，紧跟@Valid后面</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>@RequestMapping(value = &quot;/birth&quot;, method = RequestMethod.POST)
public String birth(@Valid Person person, BindingResult result, Model model) {
    System.out.println(person);
    //        获取是否有校验错误
    boolean errors = result.hasErrors();
    if (!errors)
        model.addAttribute(&quot;person&quot;, person);
    return &quot;success&quot;;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>携带错误消息到页面：BindingResult的<strong>getFieldErrors</strong>方法</p><p>获取错误消息：<strong>getDefaultMessage</strong></p><p>获取错误字段：<strong>getField</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>@RequestMapping(value = &quot;/birth&quot;, method = RequestMethod.POST)
public String birth(@Valid Person person, BindingResult result, Model model) {
    System.out.println(person);
    //        获取是否有校验错误
    boolean errors = result.hasErrors();
    if (!errors) {
        model.addAttribute(&quot;person&quot;, person);
    }
    else {
        // 获取错误
        List&lt;FieldError&gt; fErrors = result.getFieldErrors();
        Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();
        for (FieldError fError : fErrors) {
            map.put(fError.getField(), fError.getDefaultMessage());
        }
        // 渲染到视图
        model.addAttribute(&quot;errorInfo&quot;, map);
        return &quot;forward:/index.jsp&quot;;
    }
    return &quot;success&quot;;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="国际化定制错误消息" tabindex="-1"><a class="header-anchor" href="#国际化定制错误消息" aria-hidden="true">#</a> 国际化定制错误消息</h3><hr><p>Email.类名.email 校验规则.隐含模型中这个对象的key.对象的属性</p><p>Email.email 校验规则.属性名</p><p>Email.java.lang.String 校验规则.属性类型</p><p>Email</p><ul><li>如果是隐含模型中Person对象的email属性字段发生了@Email校验错误，就会生出Email.Person.email</li><li>Email.email：所有的email属性只要发生了@Email错误</li><li>Email.java.lang.String：只要是String类型发生了@Email错误</li><li>Email：只要发生了@Email校验错误</li></ul><p>新建国际化文件：</p><figure><img src="`+B+`" alt="758ff831-10ad-4957-82bb-ff5e366b12a0" tabindex="0" loading="lazy"><figcaption>758ff831-10ad-4957-82bb-ff5e366b12a0</figcaption></figure><p>写入配置：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Email</span><span class="token punctuation">.</span>email <span class="token operator">=</span> <span class="token class-name">Email</span> invalidate
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>配置SpringMVC</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--    管理国际化资源文件--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.context.support.ResourceBundleMessageSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>messageSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>basename<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.zhiyucs.conf.errors<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用带参数的国际化：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code># 国际化配置
<span class="token class-name">Length</span><span class="token punctuation">.</span>java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>String<span class="token operator">=</span>length must be between <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span> and <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">.</span>
<span class="token comment">// 实体类    </span>
    <span class="token annotation punctuation">@Length</span><span class="token punctuation">(</span>min <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">,</span> max <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>也可以自定义错误消息类型的注解：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@NotEmpty</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;不能为空&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="springmvc对ajax的支持" tabindex="-1"><a class="header-anchor" href="#springmvc对ajax的支持" aria-hidden="true">#</a> SpringMVC对AJAX的支持</h2><p>导包：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.10.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-annotations<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.10.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-databind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.10.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Jackson的使用：</p><p>@JsonIgnore 忽略输出JSON</p><p>@JsonFormat(pattern=&quot;yyyy-MM-dd&quot;) 格式化输出的JSON数据</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//    @Past是一个过去的时间</span>
<span class="token annotation punctuation">@JsonIgnore</span>
<span class="token annotation punctuation">@Past</span>
<span class="token annotation punctuation">@DateTimeFormat</span><span class="token punctuation">(</span>pattern<span class="token operator">=</span><span class="token string">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Date</span> birthday<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>返回json到前台：@ResponseBody</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/getallajax&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> <span class="token function">ajaxGetAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Person</span> zhiyu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;zhiyu&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123546@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Person</span> zs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;ZHANGSAN&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;zhangsan@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Person</span> ls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lisi@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> people <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    people<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>zs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    people<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ls<span class="token punctuation">)</span><span class="token punctuation">;</span>
    people<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>zhiyu<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> people<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>前端使用jQuery接收数据：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>获取所有信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;a:first&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">&#39;\${ctp}/getallajax&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span>
            <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
                $<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">let</span> personInfo <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">&quot;--&gt;&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;--&gt;&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gender<span class="token punctuation">;</span>
                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>personInfo <span class="token operator">+</span> <span class="token string">&#39;&lt;br/&gt;&#39;</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="请求体-responsebody" tabindex="-1"><a class="header-anchor" href="#请求体-responsebody" aria-hidden="true">#</a> 请求体 @ResponseBody</h2><p>使用的要求：</p><ul><li>method为POST</li><li>enctype=&quot;multipart/form-data&quot;时，文件内容设置为UTF-8</li></ul><p>前端：记得<strong>写name属性</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>testRequestBody<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    用户名 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    密 码 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>提交<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>后台</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/testRequestBody&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testRequestBody</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span><span class="token punctuation">(</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;content:&quot;</span> <span class="token operator">+</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>@ResponseBody也可以接收JSON数据</strong>，所以可以POJO</p><p>前端：</p><figure><img src="`+M+`" alt="043ddbf5-3646-479d-9ee8-cd393241a2b5" tabindex="0" loading="lazy"><figcaption>043ddbf5-3646-479d-9ee8-cd393241a2b5</figcaption></figure><p>控制层：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/recRequestBody&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">recRequestBody</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span><span class="token punctuation">(</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>结果：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Person{id=2, name=&#39;ZHANGSAN&#39;, birthday=null, gender=&#39;男&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="获取请求头-httpentity" tabindex="-1"><a class="header-anchor" href="#获取请求头-httpentity" aria-hidden="true">#</a> 获取请求头 @HttpEntity</h2><p><strong>@HttpEntity</strong>比**@RequestBody**更强，可以直接拿到请求头的所有，</p><p><strong>@RequestHeader</strong>只能拿到某个请求头</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/httpEntityTest&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">httpEntityTest</span><span class="token punctuation">(</span><span class="token class-name">HttpEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> httpEntity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>httpEntity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;forward:/index.jsp&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>结果：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;{host=[localhost:8080], user-agent=[Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:78.0) Gecko/20100101 Firefox/78.0], accept=[text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8], accept-language=[zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2], accept-encoding=[gzip, deflate], connection=[keep-alive], referer=[http://localhost:8080/SpringMVC_04_war_exploded/], cookie=[JSESSIONID=3944762874A51FC04663B252095F6AB7; Idea-c46feb8f=7b368810-f802-4784-8798-e6c8a43ae387], upgrade-insecure-requests=[1]}&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="responseentity-返回响应式数据" tabindex="-1"><a class="header-anchor" href="#responseentity-返回响应式数据" aria-hidden="true">#</a> @ResponseEntity 返回响应式数据</h2><p>基本用法：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">OK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过编程方式指明响应状态，所以根据不同场景返回不同状态：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/age&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">age</span><span class="token punctuation">(</span>
  <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;yearOfBirth&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> yearOfBirth<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isInFuture</span><span class="token punctuation">(</span>yearOfBirth<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
          <span class="token string">&quot;Year of birth cannot be in the future&quot;</span><span class="token punctuation">,</span> 
          <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">BAD_REQUEST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
      <span class="token string">&quot;Your age is &quot;</span> <span class="token operator">+</span> <span class="token function">calculateAge</span><span class="token punctuation">(</span>yearOfBirth<span class="token punctuation">)</span><span class="token punctuation">,</span> 
      <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">OK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>还可以设置http响应头</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/customHeader&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">customHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">HttpHeaders</span> headers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    headers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;Custom-Header&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
      <span class="token string">&quot;Custom header set&quot;</span><span class="token punctuation">,</span> headers<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">OK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>@ResponseEntity 的链式编程：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/customHeader&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">customHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">&quot;Custom-Header&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token string">&quot;Custom header set&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="文件下载及文件上传" tabindex="-1"><a class="header-anchor" href="#文件下载及文件上传" aria-hidden="true">#</a> 文件下载及文件上传</h2><h3 id="文件下载" tabindex="-1"><a class="header-anchor" href="#文件下载" aria-hidden="true">#</a> 文件下载</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/download&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token operator">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token function">download</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">//        得到要下载的文件的流</span>
    <span class="token class-name">String</span> location <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//        找到要下载的文件的真实路径</span>
    <span class="token class-name">String</span> path <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">&quot;/jqeruy-2.1.1.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">FileInputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> temp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>is<span class="token punctuation">.</span><span class="token function">available</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//        下载的文件流返回</span>
    <span class="token class-name">HttpHeaders</span> headers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    headers<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Disposition&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;attachment;filename=&quot;</span><span class="token operator">+</span><span class="token string">&quot;jqeruy-2.1.1.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token operator">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>temp<span class="token punctuation">,</span> headers<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">OK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="文件上传" tabindex="-1"><a class="header-anchor" href="#文件上传" aria-hidden="true">#</a> 文件上传</h3><h4 id="httpmessageconverter" tabindex="-1"><a class="header-anchor" href="#httpmessageconverter" aria-hidden="true">#</a> HttpMessageConverter</h4><figure><img src="`+H+`" alt="1cae080e-52fc-484d-90a5-00545933d902" tabindex="0" loading="lazy"><figcaption>1cae080e-52fc-484d-90a5-00545933d902</figcaption></figure><p>上传表单：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multipart/form-data<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    用户头像： <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headerimages<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    用户名： <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>提交<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>导包：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-io<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.3.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.3.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置SpringMVC</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--    配置文件上传解析器,id必须是multipartResolver--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multipartResolver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.multipart.commons.CommonsMultipartResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--        最大允许的上传大小--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxInMemorySize<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{1024*1024*20}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!--        默认的字符编码--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>defaultEncoding<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>编写文件上传：</p><p>@RequestParam(&quot;headerimages&quot;)<strong>MultipartFile</strong> file 封装了当前文件的信息</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/upload&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span>
                     <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;headerimages&quot;</span><span class="token punctuation">)</span><span class="token class-name">MultipartFile</span> file<span class="token punctuation">,</span>
                     <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;文件大小&quot;</span> <span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;文件名字&quot;</span> <span class="token operator">+</span>file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        file<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\\\Users\\\\54271\\\\Documents\\\\Spring_Twice\\\\SpringMVC_04\\\\src\\\\main\\\\resources\\\\&quot;</span> <span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;文件上传成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;文件上传失败&quot;</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token string">&quot;forward:/index.jsp&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="多文件上传" tabindex="-1"><a class="header-anchor" href="#多文件上传" aria-hidden="true">#</a> 多文件上传</h3><p>前端：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>upload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multipart/form-data<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    用户头像： <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headerimages<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    用户头像： <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headerimages<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    用户头像： <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headerimages<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    用户头像： <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headerimages<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    用户名： <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    密码： <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>123<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>提交<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>控制器：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/upload&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span>
                     <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;headerimages&quot;</span><span class="token punctuation">)</span><span class="token class-name">MultipartFile</span><span class="token punctuation">[</span><span class="token punctuation">]</span> files<span class="token punctuation">,</span>
                     <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> file <span class="token operator">:</span> files<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                file<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\\\Users\\\\54271\\\\Documents\\\\Spring_Twice\\\\SpringMVC_04\\\\src\\\\main\\\\resources\\\\&quot;</span> <span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;文件上传成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;文件上传失败&quot;</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token string">&quot;forward:/index.jsp&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="拦截器及多拦截器" tabindex="-1"><a class="header-anchor" href="#拦截器及多拦截器" aria-hidden="true">#</a> 拦截器及多拦截器</h2><p>拦截器的基本方法：</p><figure><img src="`+I+`" alt="915c108f-6487-4d72-bf33-9f6fb18d64b3" tabindex="0" loading="lazy"><figcaption>915c108f-6487-4d72-bf33-9f6fb18d64b3</figcaption></figure><p>preHandle：在目标方法之前调用，返回boolean，return true目标方法放行</p><p>postHandle：在目标方法运行之后调用</p><p>afterCompletion：在请求整个完成（来到目标页面）：chain.dofilter()放行（资源响应之后）</p><p>创建一个拦截器：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FirstInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;FirstInterceptor preHandle invoke....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">ModelAndView</span> modelAndView<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;FirstInterceptor postHandle invoke....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterCompletion</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;FirstInterceptor afterCompletion invoke....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置拦截器到SpringMVC</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--        配置某个拦截器，默认拦截所有请求--&gt;</span>
    <span class="token comment">&lt;!--        &lt;bean class=&quot;cn.zhiyucs.interceptor.FirstInterceptor&quot;&gt;&lt;/bean&gt;--&gt;</span>
    <span class="token comment">&lt;!--        配置某个拦截器更详细的信息--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--            只拦截success--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/success<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.zhiyucs.interceptor.FirstInterceptor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试后拦截器的运行流程：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>FirstInterceptor preHandle invoke....
FirstInterceptor postHandle invoke....
FirstInterceptor afterCompletion invoke....
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：</p><ul><li>只要preHandler不放行，以后的流程就不会执行</li><li><strong>只要放行了，afterCompletion都会执行</strong></li></ul><h3 id="多拦截器" tabindex="-1"><a class="header-anchor" href="#多拦截器" aria-hidden="true">#</a> 多拦截器</h3><p>多拦截器的执行流程：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>FirstInterceptor preHandle invoke....
SecondInterceptor preHandle invoke....
SecondInterceptor postHandle invoke....
FirstInterceptor postHandle invoke....
SecondInterceptor afterCompletion invoke....
FirstInterceptor afterCompletion invoke....
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>只要有一个拦截器不放行，以后都没有执行</p><p>如果有一个不放行，另外一个afterCompletion还是会执行</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>FirstInterceptor preHandle invoke....
SecondInterceptor preHandle invoke....
FirstInterceptor afterCompletion invoke....
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="小结" tabindex="-1"><a class="header-anchor" href="#小结" aria-hidden="true">#</a> 小结</h3><p>拦截器的preHadnle是按照顺序执行</p><p>拦截器的postHandle是按照逆序执行</p><p>拦截器的afterCompletion是按照逆序执行</p><h2 id="源码分析-拦截器" tabindex="-1"><a class="header-anchor" href="#源码分析-拦截器" aria-hidden="true">#</a> 源码分析 拦截器</h2><p>同样是在doDispatch方法中，第一次执行到的位置是：</p><p>这里执行拦截器的preHandle：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mappedHandler<span class="token punctuation">.</span><span class="token function">applyPreHandle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>因为在前面的getHander可以获取到三个拦截器（自己写了2个）</p><figure><img src="`+C+`" alt="b98ad1e2-9da6-4243-abb3-6e85bd945503" tabindex="0" loading="lazy"><figcaption>b98ad1e2-9da6-4243-abb3-6e85bd945503</figcaption></figure><p>applyPreHandle分析：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">boolean</span> <span class="token function">applyPreHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">HandlerInterceptor</span><span class="token punctuation">[</span><span class="token punctuation">]</span> interceptors <span class="token operator">=</span> <span class="token function">getInterceptors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">ObjectUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>interceptors<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> interceptors<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">HandlerInterceptor</span> interceptor <span class="token operator">=</span> interceptors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment">// true=放行</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>interceptor<span class="token punctuation">.</span><span class="token function">preHandle</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handler<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 执行完afterCompletion（）</span>
                <span class="token function">triggerAfterCompletion</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 有一个拦截器返回false目标方法不会执行，直接跳到afterCompletion</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 索引记录已经拦截的拦截器</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>interceptorIndex <span class="token operator">=</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>目标方法正常会执行postHadnler：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>mappedHandler<span class="token punctuation">.</span><span class="token function">applyPostHandle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mv<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 分析方法</span>
<span class="token keyword">void</span> <span class="token function">applyPostHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">ModelAndView</span> mv<span class="token punctuation">)</span>
    <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">HandlerInterceptor</span><span class="token punctuation">[</span><span class="token punctuation">]</span> interceptors <span class="token operator">=</span> <span class="token function">getInterceptors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">ObjectUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>interceptors<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 逆序执行每个拦截器的postHandle</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> interceptors<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">HandlerInterceptor</span> interceptor <span class="token operator">=</span> interceptors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            interceptor<span class="token punctuation">.</span><span class="token function">postHandle</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handler<span class="token punctuation">,</span> mv<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+P+`" alt="b43f1b9a-5fd6-41ec-8093-1bfc3ae780c2" tabindex="0" loading="lazy"><figcaption>b43f1b9a-5fd6-41ec-8093-1bfc3ae780c2</figcaption></figure><p>processDispatchResult方法：这就是afterCompletion总会执行的原因</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>mappedHandler <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Exception (if any) is already handled..</span>
    mappedHandler<span class="token punctuation">.</span><span class="token function">triggerAfterCompletion</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个拦截器的具体执行流程是：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">triggerAfterCompletion</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span>
    <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">HandlerInterceptor</span><span class="token punctuation">[</span><span class="token punctuation">]</span> interceptors <span class="token operator">=</span> <span class="token function">getInterceptors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">ObjectUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>interceptors<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 有记录最后一个拦截器的索引，把它之前所有放行的拦截器的afterCompletion都执行</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>interceptorIndex<span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">HandlerInterceptor</span> interceptor <span class="token operator">=</span> interceptors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                interceptor<span class="token punctuation">.</span><span class="token function">afterCompletion</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handler<span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> ex2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;HandlerInterceptor.afterCompletion threw exception&quot;</span><span class="token punctuation">,</span> ex2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="具体调试" tabindex="-1"><a class="header-anchor" href="#具体调试" aria-hidden="true">#</a> 具体调试</h3><p>第一次执行的拦截器是：conversionService interceptorIndex=0</p><figure><img src="`+F+'" alt="fc95161b-76f7-4362-aa71-9226b89dba95" tabindex="0" loading="lazy"><figcaption>fc95161b-76f7-4362-aa71-9226b89dba95</figcaption></figure><p>第二次执行 FirstInterceptor interceptorIndex =1</p><figure><img src="'+D+'" alt="25a77df8-1bbf-43d4-9cf7-8ee646074596" tabindex="0" loading="lazy"><figcaption>25a77df8-1bbf-43d4-9cf7-8ee646074596</figcaption></figure><p>第三次执行：SecondInterceptor interceptorIndex = 2</p><figure><img src="'+V+`" alt="fd7b87a8-5706-4a29-bbb0-b44fccd84901" tabindex="0" loading="lazy"><figcaption>fd7b87a8-5706-4a29-bbb0-b44fccd84901</figcaption></figure><p>全部执行完，会返回true：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mappedHandler<span class="token punctuation">.</span><span class="token function">applyPreHandle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="国际化" tabindex="-1"><a class="header-anchor" href="#国际化" aria-hidden="true">#</a> 国际化</h2><p>一般国际化的步骤：SpringMVC国际化核心 -- ResourceBundleMessageSource</p><p><a href="wiz://open_document?guid=f3227501-5a15-48bf-ae86-9936e13306cf&amp;kbguid=&amp;private_kbguid=51ed7a20-5f58-11ea-ac04-65f1a2b61811">视图解析 JSTL 国际化</a></p><p>获取区域信息： Locale locale = request.getLocale();</p><p>获取国际化的信息：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">MessageSource</span> messageSource<span class="token punctuation">;</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> welcomeinfo <span class="token operator">=</span> messageSource<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token string">&quot;welcomeinfo&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>welcomeinfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="自定义国际化文件" tabindex="-1"><a class="header-anchor" href="#自定义国际化文件" aria-hidden="true">#</a> 自定义国际化文件</h3><figure><img src="`+L+`" alt="af10972e-aa23-4eae-aaec-40d8de0bd9cb" tabindex="0" loading="lazy"><figcaption>af10972e-aa23-4eae-aaec-40d8de0bd9cb</figcaption></figure><ol><li>实现LocaleResolver接口</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyLocaleResolver</span> <span class="token keyword">implements</span> <span class="token class-name">LocaleResolver</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Locale</span> <span class="token function">resolveLocale</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLocale</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在前端配置访问路径：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login?locale=zh_CN<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>切换中文<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login?locale=en_US<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>切换英文<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>自己写国际化：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">Locale</span> <span class="token function">resolveLocale</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Locale</span> l <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token comment">// 获取地址栏的locale后的信息 如：zh_CN</span>
    <span class="token class-name">String</span> localeSt <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;locale&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//        如果带了Locale参数指定的区域信息，没有带就用浏览器</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>localeSt <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>localeSt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        l <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span>localeSt<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;_&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> localeSt<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;_&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        l <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> l<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置MVC：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--    自定义国际化--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localeResolver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.zhiyucs.component.MyLocaleResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用sessionlocaleresolver进行国际化" tabindex="-1"><a class="header-anchor" href="#使用sessionlocaleresolver进行国际化" aria-hidden="true">#</a> 使用SessionLocaleResolver进行国际化</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// locale是传入的zh_CN/en_US 这里的参数需要传入session</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;locale&quot;</span><span class="token punctuation">,</span> defaultValue <span class="token operator">=</span> <span class="token string">&quot;zh_CN&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> localeSt<span class="token punctuation">,</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">,</span> <span class="token class-name">HttpSession</span> session<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Locale</span> l <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>localeSt <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>localeSt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        l <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span>localeSt<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;_&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> localeSt<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;_&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        l <span class="token operator">=</span> locale<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 关键点：这里SessionLocaleResolver.class.getName() + &quot;.LOCALE&quot;固定写法</span>
    session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token class-name">SessionLocaleResolver</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;.LOCALE&quot;</span><span class="token punctuation">,</span> l<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置到MVC</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--    区域信息从session中拿--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.i18n.SessionLocaleResolver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localeResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="拦截器配合国际化" tabindex="-1"><a class="header-anchor" href="#拦截器配合国际化" aria-hidden="true">#</a> 拦截器配合国际化</h3><p>直接在MVC中配置拦截器：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.i18n.LocaleChangeInterceptor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>只要想国际化在页面添加locale参数即可：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login?locale=zh_CN<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>切换中文<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login?locale=en_US<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>切换英文<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>SessionLocaleResolver &amp; LocaleChangeInterceptor 工作原理</p><figure><img src="`+N+`" alt="f135df2d-8df3-4660-8b18-e6918bd9af36" tabindex="0" loading="lazy"><figcaption>f135df2d-8df3-4660-8b18-e6918bd9af36</figcaption></figure><h2 id="异常处理-exceptionhandler" tabindex="-1"><a class="header-anchor" href="#异常处理-exceptionhandler" aria-hidden="true">#</a> 异常处理 @ExceptionHandler</h2><h3 id="处理异常的一般步骤" tabindex="-1"><a class="header-anchor" href="#处理异常的一般步骤" aria-hidden="true">#</a> 处理异常的一般步骤</h3><p>首先假设一个异常的存在：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/handler01&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">handler01</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;i&quot;</span><span class="token punctuation">)</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置一个异常捕获/处理：</p><p>@ExceptionHandler 的 value 标识处理的异常，比如案例中只能处理数学异常</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
     * 告诉SpringMVC这个方法专门处理这个类的发生的异常
     * 1。 给方法随便写一个Exception，用来接受发生的异常
     * 2. 要携带异常信息不能给参数位置写Model
     * 3. 返回ModelAndView就可以
     * <span class="token keyword">@param</span> <span class="token parameter">e</span>
     * <span class="token keyword">@return</span>
     */</span>
<span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">ArithmeticException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">handleException01</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;handleException01&quot;</span><span class="token operator">+</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ModelAndView</span> mv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token string">&quot;myerror&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">&quot;ex&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> mv<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>前端JSP接收</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>\${ex}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>当访问参数i = 0时，就会处理这个异常</p><figure><img src="`+O+`" alt="15acf3ed-c8e8-4cc4-82d6-d45e8026af63" tabindex="0" loading="lazy"><figcaption>15acf3ed-c8e8-4cc4-82d6-d45e8026af63</figcaption></figure><h2 id="异常处理-responsestatus" tabindex="-1"><a class="header-anchor" href="#异常处理-responsestatus" aria-hidden="true">#</a> 异常处理 @ResponseStatus</h2><h3 id="responsestatus的基本使用" tabindex="-1"><a class="header-anchor" href="#responsestatus的基本使用" aria-hidden="true">#</a> @ResponseStatus的基本使用</h3><p>创建一个异常类</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ResponseStatus</span><span class="token punctuation">(</span>reason <span class="token operator">=</span> <span class="token string">&quot;用户被拒绝登录&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_EXTENDED</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UsernameNotFoundException</span> <span class="token keyword">extends</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建一个请求控制器：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/handler02&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">handler02</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;登录失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UsernameNotFoundException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;登录成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当发送一个错误参数就会报出错误：</p><figure><img src="`+T+`" alt="615f5bf6-23b0-4bcb-8f58-025bb4064b70" tabindex="0" loading="lazy"><figcaption>615f5bf6-23b0-4bcb-8f58-025bb4064b70</figcaption></figure><h4 id="错误的请求方式" tabindex="-1"><a class="header-anchor" href="#错误的请求方式" aria-hidden="true">#</a> 错误的请求方式</h4><p>如果使用GET方式来请求POST：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/handler03&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">handler03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[org.springframework.web.HttpRequestMethodNotSupportedException: Request method &#39;GET&#39; not supported]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="源码分析-异常处理" tabindex="-1"><a class="header-anchor" href="#源码分析-异常处理" aria-hidden="true">#</a> 源码分析 异常处理</h2><p>同样出发点时doDispatch</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token function">processDispatchResult</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">,</span> mv<span class="token punctuation">,</span> dispatchException<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在这个方法来到：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>mv <span class="token operator">=</span> <span class="token function">processHandlerException</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> exception<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在processHandlerException中轮流解析异常：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlerExceptionResolvers <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HandlerExceptionResolver</span> resolver <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlerExceptionResolvers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exMv <span class="token operator">=</span> resolver<span class="token punctuation">.</span><span class="token function">resolveException</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>exMv <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>经过调试：出现三个异常处理类：</p><ul><li><strong>ExceptionHandlerExceptionResolver</strong></li><li><strong>ResponseStatusExceptionResolver</strong></li><li><strong>DefaultHandlerExceptionResolver</strong></li></ul><figure><img src="`+z+`" alt="0ed22c29-9bc2-4ee5-99e8-be9492fc9686" tabindex="0" loading="lazy"><figcaption>0ed22c29-9bc2-4ee5-99e8-be9492fc9686</figcaption></figure><p>在DefaultHandlerExceptionResolver中就有一些默认的处理机制</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">HttpRequestMethodNotSupportedException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">handleHttpRequestMethodNotSupported</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token class-name">HttpRequestMethodNotSupportedException</span><span class="token punctuation">)</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">HttpMediaTypeNotSupportedException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">handleHttpMediaTypeNotSupported</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token class-name">HttpMediaTypeNotSupportedException</span><span class="token punctuation">)</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">HttpMediaTypeNotAcceptableException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">handleHttpMediaTypeNotAcceptable</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token class-name">HttpMediaTypeNotAcceptableException</span><span class="token punctuation">)</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">MissingPathVariableException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">handleMissingPathVariable</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token class-name">MissingPathVariableException</span><span class="token punctuation">)</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">MissingServletRequestParameterException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">handleMissingServletRequestParameter</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token class-name">MissingServletRequestParameterException</span><span class="token punctuation">)</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">ServletRequestBindingException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">handleServletRequestBindingException</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token class-name">ServletRequestBindingException</span><span class="token punctuation">)</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">ConversionNotSupportedException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">handleConversionNotSupported</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token class-name">ConversionNotSupportedException</span><span class="token punctuation">)</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">TypeMismatchException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">handleTypeMismatch</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token class-name">TypeMismatchException</span><span class="token punctuation">)</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">HttpMessageNotReadableException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">handleHttpMessageNotReadable</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token class-name">HttpMessageNotReadableException</span><span class="token punctuation">)</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">HttpMessageNotWritableException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">handleHttpMessageNotWritable</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token class-name">HttpMessageNotWritableException</span><span class="token punctuation">)</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">MethodArgumentNotValidException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">handleMethodArgumentNotValidException</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token class-name">MethodArgumentNotValidException</span><span class="token punctuation">)</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">MissingServletRequestPartException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">handleMissingServletRequestPartException</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token class-name">MissingServletRequestPartException</span><span class="token punctuation">)</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">BindException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">handleBindException</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">BindException</span><span class="token punctuation">)</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">NoHandlerFoundException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">handleNoHandlerFoundException</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token class-name">NoHandlerFoundException</span><span class="token punctuation">)</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">AsyncRequestTimeoutException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">handleAsyncRequestTimeoutException</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token class-name">AsyncRequestTimeoutException</span><span class="token punctuation">)</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="handlerexceptionresolver的实现类" tabindex="-1"><a class="header-anchor" href="#handlerexceptionresolver的实现类" aria-hidden="true">#</a> HandlerExceptionResolver的实现类</h3><figure><img src="`+X+`" alt="e7578ded-3cdb-4d6c-94d8-788e39ab6845" tabindex="0" loading="lazy"><figcaption>e7578ded-3cdb-4d6c-94d8-788e39ab6845</figcaption></figure><p>使用SimpleMappingExceptionResolver进行配置异常</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--    区域信息从session中拿--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.i18n.SessionLocaleResolver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localeResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.handler.SimpleMappingExceptionResolver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>exceptionResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>exceptionMappings<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>props</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--                key 异常的全类名 value 要去页面的视图名--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.NullPointerException<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>myerror<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>props</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--        指定错误信息取出时的值--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>exceptionAttribute<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,420),_=n("p",{exception:""},"前端：如果指定了exceptionAttribute，就可以用ex，如果不指定就用$",-1),$=a(`<div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Error<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>\${ex}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>\${exception}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：如果全局指定了Exception，就不会执行SimpleMappingExceptionResolver</p><p>同样的调试位置，最后处理的是SimpleMappingExceptionResolver</p><figure><img src="`+U+`" alt="d897564b-ad6a-40ec-95d1-91d1fabe74ac" tabindex="0" loading="lazy"><figcaption>d897564b-ad6a-40ec-95d1-91d1fabe74ac</figcaption></figure><h2 id="【小结】springmvc的运行流程" tabindex="-1"><a class="header-anchor" href="#【小结】springmvc的运行流程" aria-hidden="true">#</a> 【小结】SpringMVC的运行流程</h2><h4 id="_1-所有请求-前端控制器-dispatcherservlet-调用dodispatch进行处理" tabindex="-1"><a class="header-anchor" href="#_1-所有请求-前端控制器-dispatcherservlet-调用dodispatch进行处理" aria-hidden="true">#</a> 1. 所有请求，前端控制器（DispatcherServlet）调用doDispatch进行处理</h4><h4 id="_2-根据handlermapping的请求应色号信息找到-处理当前的请求-处理执行链" tabindex="-1"><a class="header-anchor" href="#_2-根据handlermapping的请求应色号信息找到-处理当前的请求-处理执行链" aria-hidden="true">#</a> 2. 根据HandlerMapping的请求应色号信息找到，处理当前的请求，处理执行链</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>mappedHandler <span class="token operator">=</span> <span class="token function">getHandler</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_3-根据当前处理器找到它的适配器" tabindex="-1"><a class="header-anchor" href="#_3-根据当前处理器找到它的适配器" aria-hidden="true">#</a> 3. 根据当前处理器找到它的适配器</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">HandlerAdapter</span> ha <span class="token operator">=</span> <span class="token function">getHandlerAdapter</span><span class="token punctuation">(</span>mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_4-拦截器的prehandler先执行" tabindex="-1"><a class="header-anchor" href="#_4-拦截器的prehandler先执行" aria-hidden="true">#</a> 4. 拦截器的preHandler先执行</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mappedHandler<span class="token punctuation">.</span><span class="token function">applyPreHandle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-适配器执行目标方法-返回modelandview" tabindex="-1"><a class="header-anchor" href="#_5-适配器执行目标方法-返回modelandview" aria-hidden="true">#</a> 5. 适配器执行目标方法，返回ModelAndView</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>mv <span class="token operator">=</span> ha<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_6-拦截器的posthandler执行" tabindex="-1"><a class="header-anchor" href="#_6-拦截器的posthandler执行" aria-hidden="true">#</a> 6. 拦截器的postHandler执行</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>mappedHandler<span class="token punctuation">.</span><span class="token function">applyPostHandle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mv<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_7-渲染页面-处理结果" tabindex="-1"><a class="header-anchor" href="#_7-渲染页面-处理结果" aria-hidden="true">#</a> 7. 渲染页面，处理结果</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token function">processDispatchResult</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">,</span> mv<span class="token punctuation">,</span> dispatchException<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>（1）processDispatchResult如果有异常，先处理异常</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Object</span> handler <span class="token operator">=</span> <span class="token punctuation">(</span>mappedHandler <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>（2）处理完成后接着返回ModelAndView</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>mv <span class="token operator">=</span> <span class="token function">processHandlerException</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> exception<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>（3）渲染视图</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token function">render</span><span class="token punctuation">(</span>mv<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="`+J+`" alt="43de9505-cdc5-4593-9f65-94086766ed1a" tabindex="0" loading="lazy"><figcaption>43de9505-cdc5-4593-9f65-94086766ed1a</figcaption></figure><h2 id="springmvc和spring的整合-分工明确" tabindex="-1"><a class="header-anchor" href="#springmvc和spring的整合-分工明确" aria-hidden="true">#</a> SpringMVC和Spring的整合（分工明确）</h2><p>Spring配置业务有关（事务控制、数据源...）</p><p>SpringMVC配置网站逻辑和功能（视图解析器，文件上传解析器，支持AJAX...）</p><h3 id="合并" tabindex="-1"><a class="header-anchor" href="#合并" aria-hidden="true">#</a> 合并</h3><p>在SpringMVC中导入Spring配置文件</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;import resource=&quot;spring.xml&quot; /&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="分容器" tabindex="-1"><a class="header-anchor" href="#分容器" aria-hidden="true">#</a> 分容器</h3>`,32);function nn(sn,an){const t=l("ExternalLinkIcon");return o(),c("div",null,[Q,n("p",null,[s("地址是："),n("a",Y,[s("http://localhost:8080/SpringMVC_01_war_exploded/hello"),e(t)])]),K,n("p",null,[s("地址是："),n("a",G,[s("http://localhost:8080/hello"),e(t)])]),Z,_,$])}const en=p(W,[["render",nn],["__file","SpringMVC.html.vue"]]);export{en as default};
